caddy:
    build: ./caddy
    volumes_from:
        - portfolio
    volumes:
        - ./caddy:/caddy
    ports:
        - 8042:8042
    links:
        - phpfpm

phpfpm:
    image: php:7.0-fpm
    expose:
        - "9000"
    volumes_from:
        - portfolio

portfolio:
    image: phusion/baseimage
    volumes:
        - ./portfolio:/var/www/html/portfolio/
    volumes_from:
        - composer
        - npm
    entrypoint: ./portfolio/run.sh

composer:
    image: composer/composer:alpine
    volumes:
        - /usr/local/bin/composer:/usr/local/bin/composer

npm:
    image: node:4-slim
    volumes:
        - /usr/bin/npm:/usr/bin/npm